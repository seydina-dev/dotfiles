#!/bin/sh

# --- PATH Configuration ---

# Helper to add to PATH if directory exists
_add_to_path() {
    [ -d "$1" ] && case ":$PATH:" in *":$1:"*) ;; *) PATH="$1:$PATH" ;; esac
}

_add_to_path "$HOME/.local/bin"
_add_to_path "$HOME/.cargo/bin"
_add_to_path "$HOME/go/bin"

# Preferred editor for local and remote sessions
if [ -n "$SSH_CONNECTION" ]; then
  export EDITOR='vim'
else
  export EDITOR='helix'
fi

# PNPM
if command -v pnpm >/dev/null 2>&1; then
  export PNPM_HOME="$HOME/.local/share/pnpm"
  _add_to_path "$PNPM_HOME"
fi

# Java (Distro-specific paths, check common ones)
for j_path in "/usr/lib/jvm/java-17-openjdk" "/usr/lib/jvm/default" "/opt/openjdk"; do
    if [ -d "$j_path" ]; then
        export JAVA_HOME="$j_path"
        _add_to_path "$JAVA_HOME/bin"
        break
    fi
done

# Android SDK
export ANDROID_HOME="$HOME/Android/Sdk"
export ANDROID_SDK_ROOT="$ANDROID_HOME"

if [ -d "$ANDROID_HOME" ]; then
    _add_to_path "$ANDROID_HOME/emulator"
    _add_to_path "$ANDROID_HOME/platform-tools"
    _add_to_path "$ANDROID_HOME/tools"
    _add_to_path "$ANDROID_HOME/tools/bin"
    # Find latest cmdline-tools
    latest_tools=$(ls -d "$ANDROID_HOME"/cmdline-tools/*/bin 2>/dev/null | tail -n 1)
    [ -n "$latest_tools" ] && _add_to_path "$latest_tools"
fi

export PATH
