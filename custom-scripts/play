#!/bin/sh
# sys-play: Interactive media player

F_FORMAT="\.webm$|\.flv$|\.vob$|\.ogg$|\.ogv$|\.gifv$|\.mng$|\.avi$|\.mov$|\.qt$|\.wmv$|\.yuv$|\.mkv$|\.mp4$|\.m4v$|\.svi$|\.3gp$"

# Check common media directories
SEARCH_DIRS="$HOME/media $HOME/Videos $HOME/Downloads"
for d in /run/media/$USER/*; do
    [ -d "$d" ] && SEARCH_DIRS="$SEARCH_DIRS $d"
done

VIDEO=$(find $SEARCH_DIRS -maxdepth 4 -type f 2>/dev/null | grep -E "$F_FORMAT" | sys-menu "Select Media:")

if [ -n "$VIDEO" ]; then
    notify-send "Playing" "$(basename "$VIDEO")"
    exec nohup mpv "$VIDEO" >/dev/null 2>&1
fi
