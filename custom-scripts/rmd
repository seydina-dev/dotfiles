#!/bin/sh
# rmd: Interactive directory removal

if ! command -v fzf >/dev/null; then
    echo "fzf not found."
    exit 1
fi

SELECTED=$(find . -maxdepth 3 -type d 2>/dev/null | fzf -m --reverse --header="Select directories to DELETE (TAB to multi-select)")

if [ -n "$SELECTED" ]; then
    echo "$SELECTED"
    printf "Are you sure you want to delete these directories? [y/N] "
    read -r confirm
    case "$confirm" in
        [Yy]*) echo "$SELECTED" | xargs -I {} rm -rf "{}" && echo "Deleted." ;;
        *) echo "Aborted." ;;
    esac
fi
