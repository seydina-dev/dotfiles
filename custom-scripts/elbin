#!/bin/sh
# elbin: Interactive script editor

SCRIPTS_DIR="$HOME/.local/bin"

if ! command -v helix >/dev/null && ! command -v nvim >/dev/null; then
    EDITOR="vi"
else
    EDITOR="${EDITOR:-helix}"
fi

# Find all scripts in bin
SELECTED=$(find "$SCRIPTS_DIR" -maxdepth 1 -type f -executable 2>/dev/null | sys-menu "Edit Script:")

if [ -n "$SELECTED" ]; then
    if [ -n "$TERMINAL" ]; then
        $TERMINAL -e "$EDITOR" "$SELECTED"
    elif command -v kitty >/dev/null; then
        kitty -e "$EDITOR" "$SELECTED"
    elif command -v alacritty >/dev/null; then
        alacritty -e "$EDITOR" "$SELECTED"
    else
        "$EDITOR" "$SELECTED"
    fi
fi
